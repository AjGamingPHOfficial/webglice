precision highp float;
attribute vec3 position;


#include "transform.glsl"

uniform sampler2D heightmap;
varying vec3 surfaceNormal;


void main(){
  vec4 heightmapSample = texture2D(heightmap, vec2(position.x, position.z));
  //position.y = heightmapSample.a;
  vec3 positionHeight = vec3(position.x, heightmapSample.a, position.z);
  surfaceNormal = normalize(vec3(heightmapSample.x-0.5, heightmapSample.z-0.5,
heightmapSample.y-0.5));
  transform(positionHeight);
}
